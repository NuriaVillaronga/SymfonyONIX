{% extends 'base.html.twig' %}
{% block title %}View files{% endblock %}
{% block body %}

<div class="container" style="margin-top:60px">
  {% if files|length > 0 %}

    {% for user in users %}

      {% if is_granted('ROLE_ADMIN') %}
        <table class="table table-striped table-hover">
          <tr class="table-dark">
            <th>User</th> 
            <th>File</th> 
            <th>Catalog</th>
            <th>Action</th>
          </tr>
        {% for file in files %}
          <tr>
            <td>{{ file.user }}</td>
            <td>{{ file.files }}</td>
            <td>{{ user.catalog }}</td>
            <td>
              <a id="delete-{{loop.index}}" href="{{ path('user_delete', {'id': user.id}) }}" class="btn btn-sm btn-danger">delete</a>
            </td>
          </tr>
        {% endfor %}
        </table>

      {% else %}
        <table class="table table-striped table-hover">
          <tr class="table-dark">
            <th>File</th> 
            <th>Catalog</th>
            <th>Action</th>
          </tr>
        {% for file in files %}
          <tr>
            <td>{{ file.user }}</td>
            <td>{{ file.files }}</td>
            <td>{{ user.catalog }}</td>
            <td>
              <a id="delete-{{loop.index}}" href="{{ path('user_delete', {'id': user.id}) }}" class="btn btn-sm btn-danger">delete</a>
            </td>
          </tr>
        {% endfor %}
        </table>
      {% endif %}

    {% endfor %}

  {% else %}
    <div>No files uploaded yet</div>
  {% endif %}

</div>

{% endblock %}